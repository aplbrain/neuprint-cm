version: '3.7'

services:

  neo4j:
    image: gcr.io/sandbox-220614/connectome-neuprint/neo4j:3.5
    networks:
      - neuprint-net
    restart: unless-stopped
    healthcheck:
      test: curl -i http://neo4j:7474 2>&1 | grep -c -e '200 OK'
      interval: 10s
      timeout: 10s
      retries: 5
      start_period: 40s

  neuprinthttp:
    image: gcr.io/sandbox-220614/connectome-neuprint/neuprinthttp:0.2.0
    networks:
      - neuprint-net
    restart: unless-stopped
    depends_on: 
      - neo4j

networks:
  neuprint-net:
